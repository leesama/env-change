# 环境切换插件 (Env Switch)

一款 Chrome 浏览器扩展，帮助开发者快速切换不同的开发/测试环境，自动填充登录表单。

## ✨ 功能特性

- **多环境管理** - 创建和管理多个环境配置（开发、测试、预发布等）
- **自动表单填充** - 配置用户名、密码等字段，一键自动填充
- **自动登录** - 可选配置登录按钮，自动点击完成登录
- **拖动定位** - 浮动面板和收起的圆球按钮均可自由拖动
- **域名过滤** - 配置只在指定域名下显示面板
- **配置导入导出** - 支持配置的备份和迁移

## 📦 安装方式

### 从 Release 安装

1. 前往 [Releases](../../releases) 页面下载最新版本的 `env-change-extension.zip`
2. 解压到本地目录
3. 打开 Chrome，访问 `chrome://extensions/`
4. 启用右上角的「开发者模式」
5. 点击「加载已解压的扩展程序」，选择解压后的 `dist` 目录

### 从源码构建

```bash
# 安装依赖
pnpm install

# 构建
pnpm run build

# 构建产物在 dist 目录
```

## 🚀 使用指南

### 创建环境

1. 在页面右侧的浮动面板中点击「+ 新建环境」
2. 填写环境名称（如：开发环境）
3. 填写登录页地址（必填）
4. 配置登录字段：
   - 点击选择器按钮，在页面上点选对应的输入框
   - 填写该字段的自动填充值
5. 可选：配置登录按钮以实现自动点击登录
6. 点击「保存环境」

### 切换环境

点击面板中的环境名称即可切换：
- 清除当前页面的 localStorage
- 跳转到该环境的登录页
- 自动填充表单并点击登录（如已配置）

### 配置域名过滤

1. 点击浏览器工具栏的扩展图标
2. 在「允许显示的域名」中配置（每行一个）：
   - `example.com` - 精确匹配
   - `*.example.com` - 匹配所有子域名
3. 留空表示在所有页面显示

### 导入导出配置

- **导出**：点击「📤 导出配置」下载 JSON 文件
- **导入**：点击「📥 导入配置」选择 JSON 文件，页面会自动刷新

## 🛠 技术栈

- React 18
- TypeScript
- Vite
- Chrome Extension Manifest V3

## 📁 项目结构

```
src/
├── content/          # Content Script（页面内注入的浮动面板）
│   ├── views/        # React 组件
│   ├── selector.ts   # 元素选择器逻辑
│   └── switcher.ts   # 环境切换逻辑
├── popup/            # Popup 页面（扩展设置）
├── sidepanel/        # Side Panel（保留）
├── storage.ts        # 配置存储管理
└── types.ts          # TypeScript 类型定义
```

## 📝 开发

```bash
# 安装依赖
pnpm install

# 开发模式（监听文件变化）
pnpm run dev

# 构建生产版本
pnpm run build
```

## 📄 License

MIT
